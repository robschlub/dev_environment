$title-height: 7vw;
$title-max-height: 85px;
$title-font-size: 3.5vw;
$title-max-font-size: 55px;
$np_button-width: 40px;
$np_button-height-portrait: 40px;
$np_button-height-landscape: 150px;
$np_button-vspace: 10px;
$np_button-hspace: 30px;
$top_margin-no_navbar: 20px;
$top_margin-with_navbar: 70px;
$bottom_margin: 50px;
$side-margin: 10px;
$text-margin: 4vw;

$diagram_ratio: 1.5;

@media (min-aspect-ratio: 1/100) {
  :root {
    --lesson__container-width: 90vw;
    --lesson__top-margin: 20px;
    --lesson__title-font-size: #{$title-font-size}; 
    --lesson__title-height: #{$title-height};
  }
}

@media (min-aspect-ratio: 1/1) {
  :root {
    --lesson__container-width: calc(90vw - #{$side-margin} * 2);
  }
}

@include media-breakpoint-up(md) {
  :root {
    --lesson__top-margin: 70px;
  }
}
@media (min-width: #{$xl}) {
  :root {
    --lesson__container-width: calc(#{$xl} - #{$side-margin} * 2);
    --lesson__title-font-size: #{$title-max-font-size};
    --lesson__title-height: #{$title-max-height};
  }
}

:root {
  --lesson__content-width: var(--lesson__container-width);
  --lesson__content-height: calc(var(--lesson__content-width) / #{$diagram_ratio});
  --lesson__container-height: calc(var(--lesson__content-height) + #{$np_button-vspace} + #{$np_button-height-portrait});
}

.lesson__container {
  position: relative;
  margin-left: auto;
  margin-right: auto;
  width: var(--lesson__container-width);
  height: var(--lesson__container-height);
  margin-bottom: $bottom_margin;
}

#multipage_diagram {
  width: var(--lesson__content-width);
  height: var(--lesson__content-height);
}

.lesson__text p {
  color: $color_text;
  margin-left: $text-margin;
  margin-right: $text-margin;
}

.lesson__text:first-child {
  margin-top: $text-margin;
}

.lesson__title {
  font-size: var(--lesson__title-font-size);
  // max-font-size: 50px;
  color: $color_text;
  height: var(--lesson__title-height);
  text-align: center;
  margin-top: var(--lesson__top-margin);
}

.btn-multi-page-lesson {
  position: absolute;
  border-style: none;
  border: 0;
  padding: 0;
  background-color: $color_background;
  top: calc(100% - #{$np_button-height-portrait});
  width: 0;
  height: 0;
  border-top: calc(#{$np_button-height-portrait} / 2) solid transparent;
  border-bottom: calc(#{$np_button-height-portrait} / 2) solid transparent;
}

#lesson__button-previous {
  left: 0;
  border-right: $np_button-width solid $color_navigation-buttons;
}

#lesson__button-next {
  right: 0;
  border-left: $np_button-width solid $color_navigation-buttons;
}

#lesson__button-next:hover {
  border-left: $np_button-width solid lighten($color_navigation-buttons, 10);
}

#lesson__button-previous:hover {
  border-right: $np_button-width solid lighten($color_navigation-buttons, 10);
}

@media (min-aspect-ratio: 1/1) {
  :root {
    --lesson__content-width: calc(var(--lesson__container-width) - 2 * #{$np_button-width} - 2 * #{$np_button-hspace});
    --lesson__content-height: calc(var(--lesson__content-width) / #{$diagram_ratio});
    --lesson__container-height: var(--lesson__content-height);
    //
    --lesson__max_container-height: 90vh;
    --lesson__max_content-height: var(--lesson__max_container-height);
    --lesson__max_content-width: calc(var(--lesson__max_content-height) * #{$diagram_ratio});
    --lesson__max_container-width: calc(var(--lesson__max_content-width) + 2 * #{$np_button-width} + 2 * #{$np_button-hspace});
  }

  .lesson__container {
    width: var(--lesson__container-width);
    height: var(--lesson__container-height);
    margin-left: auto;
    margin-right: auto;
    max-height: var(--lesson__max_container-height);
    max-width: var(--lesson__max_container-width);
  }

  #multipage_diagram {
    display: inline-block;
    width: var(--lesson__content-width);
    height: var(--lesson__content-height);
    margin-left: $np_button-hspace;
    margin-right: $np_button-hspace;
    max-height: var(--lesson__max_content-height);
    max-width: var(--lesson__max_content-width);
  }

  .btn-multi-page-lesson {
    position: relative;
    top: calc(50% - #{$np_button-height-landscape} / 2);
    display: inline-block;
    vertical-align: top;
    border-top: calc(#{$np_button-height-landscape} / 2) solid transparent;
    border-bottom: calc(#{$np_button-height-landscape} / 2) solid transparent;
  }
}

.lesson-clear-floats {
  clear: both;
}

.lesson__arrow-right {
  width: 0;
  height: 0;
  border-top: 60px solid transparent;
  border-bottom: 60px solid transparent;
  border-left: 60px solid green;
}
