$title-height: 7;
$title-font-size: 3;
$np_button-width: 3;
$np_button-height-portrait: 8;
$np_button-height-landscape: 12;
$np_button-vspace: 4;
$np_button-hspace: 4;
$text-margin: 4;
$goto_button-width: 9;
// $goto_button-min-width: 50px;
$goto_button-height: 4;
$goto_button-font-size: 1.4;

$top_margin-no_navbar: 20px;
$top_margin-with_navbar: 70px;
$bottom_margin: 50px;
$side-margin: 10px;
$diagram_ratio: 1.5;

@media (min-aspect-ratio: 1/100) {
  :root {
    --lesson__container-width: 90vw;
    --lesson__top-margin: 20px;
    --lesson__title-font-size: calc(#{$title-font-size} * 1vw);
    --lesson__title-height: calc(#{$title-height} * 1vw);
    --lesson__np_button-width: calc(#{$np_button-width} * 1vw);
    --lesson__np_button-height: calc(#{$np_button-height-portrait} * 1vw);
    --lesson__np_button-vspace: calc(#{$np_button-vspace} * 1vw);
    --lesson__np_button-hspace: calc(#{$np_button-hspace} * 1vw);
    --lesson__text-margin: calc(#{$text-margin} * 1vw);
    --lesson__goto_button-width: calc(#{$goto_button-width} * 1vw * 1.5);
    --lesson__goto_button-height: calc(#{$goto_button-height} * 1vw * 1.5);
    --lesson__goto_button-font-size: calc(#{$goto_button-font-size} * 1vw);
  }
}

@media (min-aspect-ratio: 1/1) {
  :root {
    --lesson__container-width: calc(90vw - #{$side-margin} * 2);
    --lesson__np_button-height: calc(#{$np_button-height-landscape} * 1vw);
    --lesson__goto_button-width: calc(#{$goto_button-width} * 1vw);
    --lesson__goto_button-height: calc(#{$goto_button-height} * 1vw);
  }
}

@include media-breakpoint-up(md) {
  :root {
    --lesson__top-margin: 70px;
  }
}

@media (min-width: #{$xl}) {
  :root {
    --lesson__container-width: calc(#{$xl} * 0.9);
    --lesson__title-font-size: calc(#{$title-font-size} / 100 * #{$xl} * 1.2);
    --lesson__title-height: calc(#{$title-height} / 100 * #{$xl});
    --lesson__np_button-width: calc(#{$np_button-width} / 100 * #{$xl});
    --lesson__np_button-height: calc(#{$np_button-height-landscape} / 100 * #{$xl});
    --lesson__np_button-vspace: calc(#{$np_button-vspace} / 100 * #{$xl});
    --lesson__np_button-hspace: calc(#{$np_button-hspace} / 100 * #{$xl});
    --lesson__text-margin: calc(#{$text-margin} / 100 * #{$xl});
    --lesson__goto_button-width: calc(#{$goto_button-width} / 100 * #{$xl});
    --lesson__goto_button-height: calc(#{$goto_button-height} / 100 * #{$xl});
    --lesson__goto_button-font-size: calc(#{$goto_button-font-size} / 100 * #{$xl});
  }
}

@media (min-aspect-ratio: 2/1) and (max-height: 500px) {
  :root {
    --lesson__goto_button-height: 10vh;
    --lesson__goto_button-width: 20vh;
    --lesson__np_button-height: 20vh;
    --lesson__goto_button-font-size: 3vh;
  }
}

:root {
  --lesson__content-width: var(--lesson__container-width);
  --lesson__content-height: calc(var(--lesson__content-width) / #{$diagram_ratio});
  --lesson__container-height: calc(var(--lesson__content-height) + var(--lesson__np_button-vspace) + var(--lesson__np_button-height));
}

.lesson__container {
  position: relative;
  margin-left: auto;
  margin-right: auto;
  width: var(--lesson__container-width);
  height: var(--lesson__container-height);
  margin-bottom: $bottom_margin;
}

#multipage_diagram {
  width: var(--lesson__content-width);
  height: var(--lesson__content-height);
}

.lesson__text {
  // display: inline-block;
  background-color: rgba($color_diagram, 0.4);
  margin-left: var(--lesson__text-margin);
  margin-right: var(--lesson__text-margin);
  margin-top: var(--lesson__text-margin);
}

.lesson__text p {
  // display: inline-block;
  padding-left: 5px;
  padding-right: 5px;
  // clear: both;
  // float: left;
  color: $color_diagram-text;
  margin-left: calc(var(--lesson__text-margin) * 1);
  margin-right: calc(var(--lesson__text-margin) * 1);
}

.lesson__text p:first-child {
  margin-top: var(--lesson__text-margin);
}

.lesson__text p:last-child {
  margin-bottom: var(--lesson__text-margin);
}

.lesson__title {
  font-size: var(--lesson__title-font-size);
  color: $color_text;
  height: var(--lesson__title-height);
  text-align: center;
  margin-top: var(--lesson__top-margin);
}

.btn-multi-page-lesson {
  position: absolute;
  border-style: none;
  border: 0;
  padding: 0;
  background-color: $color_background;
  top: calc(100% - var(--lesson__np_button-height));
  width: 0;
  height: 0;
  border-top: calc(var(--lesson__np_button-height) / 2) solid transparent;
  border-bottom: calc(var(--lesson__np_button-height) / 2) solid transparent;
}

#lesson__button-previous {
  left: 0;
  border-right: var(--lesson__np_button-width) solid $color_navigation-buttons;
}

#lesson__button-next {
  right: 0;
  border-left: var(--lesson__np_button-width) solid $color_navigation-buttons;
}

#lesson__button-next:hover {
  border-left: var(--lesson__np_button-width) solid lighten($color_navigation-buttons, 10);
}

#lesson__button-previous:hover {
  border-right: var(--lesson__np_button-width) solid lighten($color_navigation-buttons, 10);
}

.lesson__button-goto_container {
  position: absolute;
  border: 0;
  left: calc(50% - var(--lesson__goto_button-width) / 2);
  top: calc(100% - var(--lesson__np_button-height) / 2 - var(--lesson__goto_button-height) / 2);
  height: var(--lesson__goto_button-height);
  width: var(--lesson__goto_button-width);
}

.lesson__button-goto {
  position: absolute;
  border: 0;
  // left: calc(50% - var(--lesson__goto_button-width) / 2);
  // top: calc(100% - var(--lesson__np_button-height) / 2 - var(--lesson__goto_button-height) / 2);
  background-color: $color_navigation-buttons;
  // height: var(--lesson__goto_button-height);
  // width: var(--lesson__goto_button-width);
  font-size: var(--lesson__goto_button-font-size);
  color: $color_text;
  width: var(--lesson__goto_button-width);
}

#lesson__button-goto:hover {
  background-color: lighten($color_navigation-buttons, 10);
}

#lesson__page_number {
  position: absolute;
  width: 100%;
  top: calc(100% - var(--lesson__np_button-height) - var(--lesson__np_button-vspace) / 2 - var(--lesson__goto_button-font-size) / 2);
  font-size: var(--lesson__goto_button-font-size);
  text-align: center;
  color: $color_text;
}

@media (min-aspect-ratio: 1/1) {
  :root {
    --lesson__content-width: calc(var(--lesson__container-width) - 2 * var(--lesson__np_button-width) - 2 * var(--lesson__np_button-hspace));
    --lesson__content-height: calc(var(--lesson__content-width) / #{$diagram_ratio});
    --lesson__container-height: var(--lesson__content-height);
    //
    --lesson__max_container-height: 90vh;
    --lesson__max_content-height: var(--lesson__max_container-height);
    --lesson__max_content-width: calc(var(--lesson__max_content-height) * #{$diagram_ratio});
    --lesson__max_container-width: calc(var(--lesson__max_content-width) + 2 * var(--lesson__np_button-width) + 2 * var(--lesson__np_button-hspace));
  }

  .lesson__container {
    width: var(--lesson__container-width);
    height: var(--lesson__container-height);
    margin-left: auto;
    margin-right: auto;
    max-height: var(--lesson__max_container-height);
    max-width: var(--lesson__max_container-width);
  }

  #multipage_diagram {
    display: inline-block;
    width: var(--lesson__content-width);
    height: var(--lesson__content-height);
    margin-left: var(--lesson__np_button-hspace);
    margin-right: var(--lesson__np_button-hspace);
    max-height: var(--lesson__max_content-height);
    max-width: var(--lesson__max_content-width);
  }

  .btn-multi-page-lesson {
    position: relative;
    top: calc(50% - var(--lesson__np_button-height) / 2);
    display: inline-block;
    vertical-align: top;
    border-top: calc(var(--lesson__np_button-height) / 2) solid transparent;
    border-bottom: calc(var(--lesson__np_button-height) / 2) solid transparent;
  }

  .lesson__button-goto_container {
    left: calc(100% - var(--lesson__np_button-width) / 2 - var(--lesson__goto_button-width) / 2);

    // left: calc(var(--lesson__np_button-width) - var(--lesson__goto_button-width));
    // left: 0;
    top: 0;
  }

  #lesson__page_number {
    left: calc(100% - var(--lesson__np_button-width) / 2 - var(--lesson__goto_button-width) / 2);
    width: var(--lesson__goto_button-width);
    text-align: center;
    top: calc(100% - var(--lesson__goto_button-font-size) * 1.5);
    // bottom: 0;
  }
}

.lesson-clear-floats {
  clear: both;
}

.lesson__arrow-right {
  width: 0;
  height: 0;
  border-top: 60px solid transparent;
  border-bottom: 60px solid transparent;
  border-left: 60px solid green;
}
