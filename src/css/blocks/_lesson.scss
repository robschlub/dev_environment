$title-height: 50px;
$title-font-size: 30px;
$np_button-width: calc(#{$title-height} * 0.8);
$np_button-height: 40px;
$np_button-vspace: 5px;
$np_button-hspace: calc(#{$title-height} * 0.2);
$top_margin-no_navbar: 20px;
$top_margin-with_navbar: 70px;
$bottom_margin: 50px;
$side-margin: 50px;

$diagram_ratio: 1.5;

@media (min-aspect-ratio: 1/100) {
  :root {
    --lesson__container-width: 90vw;
  }
}

@media (min-aspect-ratio: 1/1) {
  :root {
    --lesson__container-width: calc(90vw - #{$side-margin} * 2);
  }
}

@media (min-width: calc(#{$xl})) {
  :root {
    --lesson__container-width: calc(#{$xl} - #{$side-margin} * 2);
  }
}

:root {
  --lesson__content-width: var(--lesson__container-width);
  --lesson__content-height: calc(var(--lesson__content-width) / #{$diagram_ratio});
  --lesson__container-height: calc(var(--lesson__content-height) + #{$title-height} + #{$title-height} + #{$np_button-vspace} + #{$np_button-height});
  //
  --lesson__max_container-height: 90vh;
  --lesson__max_content-height: calc(var(--lesson__max_container-height) - #{$title-height} - #{$np_button_vspace} - #{$np_button_height});
  --lesson__max_content-width: calc(var(--lesson__max_content-height) * #{$diagram_ratio});
  --lesson__max_container-width: var(--lesson__max_content-width);
}

.lesson__container {
  margin-top: $top_margin-no_navbar;
  position: relative;
  margin-left: auto;
  margin-right: auto;
  width: var(--lesson__container-width);
  height: var(--lesson__container-height);
  margin-bottom: $bottom_margin;
}

#multipage_diagram {
  width: var(--lesson__content-width);
  height: var(--lesson__content-height);
}

.lesson__text p {
  color: $color_text;
}

.lesson__title {
  font-size: $title-font-size;
  color: $color_text;
  height: $title-height;      //Check this is working
  text-align: center;
}

.btn-multi-page-lesson {
  position: absolute;
  width: $np_button-width;
  height: $np_button-height;
  border-style: none;
  color: $color_primary;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
  top: calc(100% - #{$np_button-height});
}

#lesson__button-previous {
  left: 0;
}

#lesson__button-next {
  right: 0;
}

@media (min-aspect-ratio: 1/1) {
  :root {
    --lesson__content-width: calc(var(--lesson__container-width) - 2 * #{$title-height});
    --lesson__content-height: calc(var(--lesson__content-width) / #{$diagram_ratio});
    --lesson__container-height: calc(var(--lesson__content-height) + #{$title-height});
    //
    // --lesson__max_container-height: 50vh;
    // --lesson__max_content-height: calc(var(--lesson__max_container-height) - #{$title-height});
    // --lesson__max_content-width: calc(var(--lesson__max_content-height) * #{$diagram_ratio});
    // --lesson__max_container-width: var(--lesson__max_content-width);
  }

  .lesson__container {
    width: var(--lesson__container-width);
    height: var(--lesson__container-height);
    // max-height: var(--lesson__max_container-height);
    // max-width: var(--lesson__max_container-width);
  }

  #multipage_diagram {
    display: inline-block;
    // width: var(--lesson__content-width);
    // height: var(--lesson__content-height);
    width: var(--lesson__content-width);
    height: var(--lesson__content-height);
    margin-left: $np_button-hspace;
    margin-right: $np_button-hspace;
    // max-height: var(--lesson__max_content-height);
    // max-width: var(--lesson__max_content-width);
  }

  .btn-multi-page-lesson {
    position: relative;
    top: 0;
    display: inline-block;
    vertical-align: top;
    height: var(--lesson__content-height);
    width: $np_button-width;
  }

  .lesson__text p {
    color: red;
  }
}

.lesson-clear-floats {
  clear: both;
}

